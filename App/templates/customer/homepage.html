{% extends "driver/layout.html" %} 
{% block title %}Customer Home{% endblock %}
{% block head %}
<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<!-- Custom CSS -->
<link rel="stylesheet" href="{{ url_for('static', filename='styles/user/homepage.css') }}" />
{% endblock %} 

{% block content %}

<div class="header">Welcome, Customer!</div>

<!-- Navigation Bar -->
<div class="nav-container">
  <a class="nav-btn active" href="{{ url_for('index_views.customer_homepage') }}">Home</a>
  <a class="nav-btn" href="{{ url_for('index_views.customer_stock') }}">Ava Stock</a>
  <a class="nav-btn" href="{{ url_for('index_views.customer_schedule') }}">Schedule</a>
  <a class="nav-btn" href="{{ url_for('auth_views.logout') }}">Logout</a>
</div>

<div class="page-container">
  <!-- Map Section -->
  <div class="map-section">
    <div id="map" class="map"></div>
    
    <!-- Map Info Overlay -->
    <div class="map-info">
      <div class="map-info-item">
        <span class="map-info-label">ETA:</span>
        <span class="map-info-value" id="eta">5min</span>
      </div>
      <div class="map-info-item">
        <span class="map-info-label">Distance:</span>
        <span class="map-info-value" id="distance">5km</span>
      </div>
    </div>
  </div>

  <!-- Orders Section -->
  <div class="orders-section">
    <!-- Order/Pre-Order Tabs -->
    <div class="order-tabs">
      <a class="tab-btn active" href="{{ url_for('index_views.customer_homepage') }}" data-tab="order">Order</a>
      <a class="tab-btn" href="{{ url_for('index_views.customer_preorder') }}" data-tab="pre-order">Pre-Order</a>
    </div>

    <!-- Product Grid -->
    <div class="product-grid">
      <div class="product-card">
        <div class="product-image">(image)</div>
        <h3 class="product-name">Hops bread</h3>
        <p class="product-status">(Ordered amount)</p>
      </div>

      <div class="product-card">
        <div class="product-image">(image)</div>
        <h3 class="product-name">Coconut bus</h3>
        <p class="product-status">(Ordered amount)</p>
      </div>
    </div>

    <!-- Status Button -->
    <div class="status-btn-container">
      <button class="status-btn">Status</button>
    </div>
  </div>

  <!-- Established Footer -->
  <div class="established-footer">
    <h3>Established</h3>
  </div>
</div>

{% endblock %} 

{% block scripts %}
<script>
  var map = L.map("map", {
    center: [10.234144, -61.43942],
    zoom: 16,
    minZoom: 16,
    maxZoom: 18,
    maxBounds: [[10.24166, -61.45022], [10.2274, -61.42478]],
  });
  
  L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png", {
    maxZoom: 18,
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
  }).addTo(map);

  const tabBtns = document.querySelectorAll('.tab-btn');
  tabBtns.forEach(btn => {
    btn.addEventListener('click', function() {
      tabBtns.forEach(b => b.classList.remove('active'));
      this.classList.add('active');
      const tab = this.dataset.tab;
      console.log('Switched to:', tab);
    });
  });
</script>
{% endblock %}