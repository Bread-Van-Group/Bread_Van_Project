{% extends "owner/layout.html" %}

{% block title %}Owner Report{% endblock %}

{% block head %}
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/owner/report.css') }}">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  {{ super() }}
{% endblock %}

{% block content %}
<div class="page-wrapper">
  <!-- Sidebar Navigation -->
  <div class="sidebar">
    <div class="sidebar-logo">LOGO</div>
    <a class="sidebar-btn" href="{{ url_for('index_views.owner_homepage') }}">Dashboard</a>
    <a class="sidebar-btn active" href="{{ url_for('index_views.owner_report') }}">Reports</a>
    <a class="sidebar-btn" href="{{ url_for('index_views.owner_inventory') }}">Set Inventory</a>
    <a class="sidebar-btn" href="{{ url_for('index_views.owner_routes') }}">Routes</a>
    <a class="sidebar-btn sidebar-logout" href="{{ url_for('auth_views.logout') }}">Logout</a>
  </div>

  <!-- Main Content Area -->
  <div class="content-wrapper">


    <div class="page-container">
      <div class="report-container">
        <div class="main-content-scrollable">
          <div class="content-card">

            <div class="report-header">
              <h1>Report</h1>
              <div class="report-actions">
                <div class="custom-dropdown">
                  <button class="filter-btn" id="dropdown-toggle">
                    Last 7 Days <span style="margin-left:6px;">â–¾</span>
                  </button>
                  <ul class="dropdown-menu" id="dropdown-menu">
                    <li data-value="week">Last 7 Days</li>
                    <li data-value="month">Last 30 Days</li>
                    <li data-value="year">Last Year</li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- Charts -->
            <div class="charts-grid">
              <div class="chart-card">
                <h2>Average Order Value</h2>
                <canvas id="orderValueChart" width="400" height="200"></canvas>
              </div>
              <div class="chart-card">
                <h2>Customer Traffic</h2>
                <canvas id="trafficChart" width="400" height="200"></canvas>
              </div>
            </div>

            <!-- Tables -->
            <div class="tables-grid">
              <div class="table-card">
                <h2>Top-Selling Items</h2>
                <table>
                  <thead>
                    <tr><th>Rank</th><th>Item</th><th>Units Sold</th></tr>
                  </thead>
                  <tbody id="top-selling-body">
                    <tr><td colspan="3">Loading...</td></tr>
                  </tbody>
                </table>
              </div>
              <div class="table-card">
                <h2>Frequently Bought Together</h2>
                <table>
                  <thead>
                    <tr><th>Item 1</th><th>Item 2</th><th>Times Paired</th></tr>
                  </thead>
                  <tbody id="pairing-body">
                    <tr><td colspan="3">Loading...</td></tr>
                  </tbody>
                </table>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!--<style>
  .sidebar {
    display: flex;
    flex-direction: column;
  }
  .sidebar-logout {
    margin-top: auto;
    color: #e74c3c !important;
  }
  .sidebar-logout:hover {
    background-color: #e74c3c !important;
    color: white !important;
  }
</style>-->
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/owner/report.js') }}"></script>
<script src="{{ url_for('static', filename='js/owner/set_inventory.js') }}"></script>
{% endblock %}