{% extends "driver/layout.html" %}

{% block title %}Owner Report{% endblock %}

{% block head %}
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/user/report.css') }}">
  
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  {{ super() }}
{% endblock %}

{% block content %}
<div class="header">Welcome, Owner!
  <div class="logo">LOGO</div>
</div>

<div class="page-container">
  <div class="report-container">


    
    <div class="main-content-scrollable">
      
      <div class="content-card">
        <div class="report-header">
          <h1>Report</h1>
          <div class="report-actions">
            <button class="filter-btn">Filter</button>
            <button class="export-btn">Export</button>
          </div>
        </div>

        <div class="filters">
          <div class="filter-group">
            <label for="time-filter">Filter by:</label>
            <select id="time-filter">
              <option value="week">Week</option>
              <option value="month">Month</option>
              <option value="year">Year</option>
            </select>
          </div>
        </div>

        <div class="charts-grid">
          <div class="chart-card">
            <h2>Average Order Value</h2>
            <canvas id="orderValueChart" width="400" height="200"></canvas>
          </div>
          <div class="chart-card">
            <h2>Customer Traffic</h2>
            <canvas id="trafficChart" width="400" height="200"></canvas>
          </div>
        </div>

        <div class="tables-grid">
          <div class="table-card">
            <h2>Top-Selling Items</h2>
            <table>
              <thead>
                <tr>
                  <th>Rank</th>
                  <th>Item</th>
                </tr>
              </thead>
              <tbody>
                <tr><td>1</td><td>Hops</td></tr>
                <tr><td>2</td><td>Butterfield</td></tr>
                <tr><td>3</td><td>Cheesefield</td></tr>
              </tbody>
            </table>
          </div>
          <div class="table-card">
            <h2>Frequently Bought Together</h2>
            <table>
              <thead>
                <tr>
                  <th>Item</th>
                  <th>Quantity</th>
                  <th>Price</th>
                </tr>
              </thead>
              <tbody>
                <tr><td>Item1</td><td>10</td><td>$5.00</td></tr>
                <tr><td>Item2</td><td>8</td><td>$4.50</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="button-container">
  <a class="bottom-btn" href="{{ url_for('index_views.owner_homepage') }}">Dashboard</a>
  <a class="bottom-btn" href="{{ url_for('index_views.owner_report') }}">Reports</a>
  <a class="bottom-btn" href="#">Inventory</a>
  <a class="bottom-btn" href="#">Routes</a>
</div>
{% endblock %}
{% block scripts %}
<script>
  // Initialize charts
  document.addEventListener('DOMContentLoaded', function() {
    // Average Order Value Chart
    const orderValueCtx = document.getElementById('orderValueChart').getContext('2d');
    new Chart(orderValueCtx, {
      type: 'bar',
      data: {
        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
        datasets: [{
          label: 'Average Order Value',
          data: [120, 190, 300, 500, 200, 300, 400],
          backgroundColor: 'rgba(54, 162, 235, 0.7)'
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });

    // Customer Traffic Chart
    const trafficCtx = document.getElementById('trafficChart').getContext('2d');
    new Chart(trafficCtx, {
      type: 'line',
      data: {
        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
        datasets: [{
          label: 'Customer Traffic',
          data: [10, 20, 15, 30, 25, 50, 40],
          borderColor: '#ff6384',
          tension: 0.3,
          fill: false
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });

    // Filter functionality
    document.getElementById('time-filter').addEventListener('change', function() {
      // In a real app, this would fetch new data
      alert(`Filtering by: ${this.value}`);
    });

    // Export button
    document.querySelector('.export-btn').addEventListener('click', function() {
      alert('Exporting report data...');
    });
  });
</script>
{% endblock %}